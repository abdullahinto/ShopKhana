{% extends 'index.html' %}

{% block title %}
ShopKhana | Manage Account
{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/manage_account.css') }}">
{% endblock extra_css %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/manage_account.js') }}"></script>
{% endblock extra_js %}

{% block body %}

<section id="manage-account" class="manage-account-section">
  <!-- Tabs Navigation (Desktop) -->
  <ul class="account-tabs" id="accountTabs">
    <li class="active" data-tab="profileTab"><i class="fas fa-user"></i> Profile</li>
    <li data-tab="securityTab"><i class="fas fa-lock"></i> Security</li>
    <li data-tab="addressesTab"><i class="fas fa-map-marker-alt"></i> Addresses</li>
    <li data-tab="preferencesTab"><i class="fas fa-cog"></i> Preferences</li>
  </ul>

  <!-- Tabs Dropdown (Mobile) -->
  <div class="account-tabs-dropdown" id="accountTabsDropdown">
    <select>
      <option value="profileTab">Profile</option>
      <option value="securityTab">Security</option>
      <option value="addressesTab">Addresses</option>
      <option value="preferencesTab">Preferences</option>
    </select>
  </div>

  <!-- Tab Content: Profile -->
  <div class="tab-content active" id="profileTab">
    <h2 style="font-weight: 500;">Personal Information</h2>
    <form id="profileForm" class="account-form">
      <div class="form-group">
        <label for="accountName">Name</label>
        <input type="text" id="accountName" name="accountName" value="{{ del_info.full_name or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="accountEmail">Email</label>
        <input type="email" id="accountEmail" name="accountEmail" value="{{ del_info.contact_email or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="accountPhone">Phone Number</label>
        <input type="text" id="accountPhone" name="accountPhone" value="{{ del_info.phone_number or '' }}" required>
        <span class="error-message"></span>
      </div>
      <button type="button" class="save-btn" id="saveProfileBtn">Save Changes</button>
      <span class="save-message" id="profileSaveMsg"></span>
    </form>
  </div>

  <!-- Tab Content: Security -->
  <div class="tab-content" id="securityTab">
    <h2 style="font-weight: 500;">Password & Security</h2>
    <form id="securityForm" class="account-form">
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <input type="password" id="currentPassword" name="currentPassword" placeholder="********" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input type="password" id="newPassword" name="newPassword" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <input type="password" id="confirmPassword" name="confirmPassword" required>
        <span class="error-message"></span>
      </div>
      <button type="button" class="save-btn" id="saveSecurityBtn">Save Changes</button>
      <span class="save-message" id="securitySaveMsg"></span>
    </form>
  </div>

  <!-- Tab Content: Addresses -->
  <div class="tab-content" id="addressesTab">
    <h2 style="font-weight: 500;">Address Book</h2>
    <form id="addressForm" class="account-form">
      <div class="form-group">
        <label for="addressLine1">Address</label>
        <input type="text" id="addressLine1" name="addressLine1" value="{{ del_info.addressLine1 or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="area">Area</label>
        <input type="text" id="area" name="area" value="{{ del_info.area or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="colony">Colony</label>
        <input type="text" id="colony" name="colony" value="{{ del_info.colony or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="city">City</label>
        <input type="text" id="city" name="city" value="{{ del_info.city or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="province">Province</label>
        <input type="text" id="province" name="province" value="{{ del_info.province or '' }}" required>
        <span class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="zip">ZIP/Postal Code</label>
        <input type="text" id="zip" name="zip" value="{{ del_info.zip or '' }}" required>
        <span class="error-message"></span>
      </div>
      <!-- <div class="form-group">
        <label for="country">Country</label>
        <input type="text" id="country" name="country" value="{{ del_info.country or '' }}" required>
        <span class="error-message"></span>
      </div> -->
      <button type="button" class="save-btn" id="saveAddressBtn">Save Changes</button>
      <span class="save-message" id="addressSaveMsg"></span>
    </form>
  </div>

  <!-- Tab Content: Preferences -->
  <div class="tab-content" id="preferencesTab">
    <h2 style="font-weight: 500;">Preferences</h2>
    <!-- Communication Preferences (Left as-is for now) -->
    <div class="pref-section">
      <h3><i class="fas fa-envelope"></i> Communication Preferences</h3>
      <form id="commPrefForm" class="account-form">
        <div class="form-group">
          <label>
            <input type="checkbox" name="emailNotif" checked>
            Email Notifications
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" name="smsNotif">
            SMS Notifications
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" name="pushNotif">
            Push Notifications
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" name="inAppNotif" checked>
            In-App Notifications
          </label>
        </div>
        <button type="button" class="save-btn" id="saveCommPrefBtn">Save Changes</button>
        <span class="save-message" id="commPrefSaveMsg"></span>
      </form>
    </div>

    <!-- Security Preferences (Left unchanged) -->
    <div class="pref-section">
      <h3 style="font-weight: 500;"><i class="fas fa-user-shield"></i> Security Preferences</h3>
      <form id="privacyForm" class="account-form">
        <div class="form-group">
          <label>
            <input type="checkbox" name="showEmail" checked>
            Show my email to others
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" name="showPhone">
            Show my phone number to others
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" name="showAddress">
            Show my address to others
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" name="profilePublic">
            Make my profile public
          </label>
        </div>
        <button type="button" class="save-btn" id="savePrivacyBtn">Save Changes</button>
        <span class="save-message" id="privacySaveMsg"></span>
      </form>
    </div>
  </div>
</section>

{% endblock body %}